
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Spring in Practice</title>
  <meta name="author" content="Willie Wheeler">

  
  <meta name="description" content="reCAPTCHA is a novel CAPTCHA system developed by the School of Computer Science at my alma mater, Carnegie Mellon University. I won&rsquo;t explain &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://springinpractice.com/blog/page/9">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Spring in Practice" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Forum' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-31137459-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <ul class="social-links">
    <li><a href="https://twitter.com/williewheeler"><img src="http://springinpractice.s3.amazonaws.com/blog/theme/icons/twitter.png" alt="Twitter" /></a></li>
    <li><a href="https://github.com/williewheeler"><img src="http://springinpractice.s3.amazonaws.com/blog/theme/icons/github.png" alt="GitHub" /></a></li>
    <li><a href="http://stackoverflow.com/users/41871/willie-wheeler"><img src="http://springinpractice.s3.amazonaws.com/blog/theme/icons/stackoverflow.png" alt="Stack Overflow" /></a></li>
    <li><a href="http://www.linkedin.com/in/williewheeler"><img src="http://springinpractice.s3.amazonaws.com/blog/theme/icons/linkedin.png" alt="LinkedIn" /></a></li>
  </ul>
  <h1><a href="/">Spring in Practice</a></h1>
  
    <h2>Willie Wheeler's Spring blog</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/archives/">Archives</a></li>
  <li><a href="/book/">The Book</a></li>
  <li><a href="/consulting/"><span style="padding-left:20px;background:url(http://springinpractice.com/images/leaf.png) left no-repeat">Spring Consulting</span></a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/03/13/how-to-recaptcha-your-java-application/">How to reCAPTCHA Your Java Application</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-03-13T07:42:36-07:00" pubdate data-updated="true">Mar 13<span>th</span>, 2008</time>
        
         | <a href="/2008/03/13/how-to-recaptcha-your-java-application/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>reCAPTCHA is a novel CAPTCHA system developed by the School of Computer Science at my alma mater, Carnegie Mellon University. I won&rsquo;t explain its coolness here since they do a good job of <a href="http://recaptcha.net/learnmore.html" target="_blank">explaining that coolness themselves</a>. What I will do here, though, is explain how to get your Java app reCAPTCHAed very quickly. Note however that reCAPTCHA is not tied specifically to Java.</p>

<p>In this tutorial I&rsquo;m using Spring 2.5 MVC with annotations, and Commons Validator, but you&rsquo;ll be able to follow this whether or not you&rsquo;re using Spring and Validator.</p>

<p>These instructions are based on the <a href="http://recaptcha.net/apidocs/captcha/client.html" target="_blank">instructions from the reCAPTCHA site</a>, but I&rsquo;m focusing specifically on Java integration whereas the site makes you dig around a bit to get the information. Not too bad, but enough that there&rsquo;s value in my writing a Java-specific tutorial. :&ndash;)</p>

<h3>Step 1. Get your account and key pair</h3>


<p>First, go to <a href="http://recaptcha.net/" target="_blank">the reCAPTCHA web site</a> and create an account. As part of that account creation process you&rsquo;ll have to specify the domain your reCAPTCHA will be protecting. The reCAPTCHA site will will give you a key pair for that domain. The key pair allows you to authenticate your reCAPTCHA requests to the reCAPTCHA servers, as we&rsquo;ll see.</p>

<h3>Step 2. Put the reCAPTCHA JavaScript in your app&#8217;s form</h3>




<p><p>Here&rsquo;s the JavaScript you need to put in your form, meaning in between the &lt;form&gt; and &lt;/form&gt; tags. Put it wherever you would have normally put a CAPTCHA text box. This JavaScript will generate the reCAPTCHA box when users request the page:</p>

<p><pre>&lt;script type=&ldquo;text/javascript&rdquo;</p>

<pre><code>src="http://api.recaptcha.net/challenge?k=&amp;lt;your_public_key&amp;gt;"&amp;gt;
</code></pre>

<p>&lt;/script&gt;
&lt;noscript&gt;</p>

<pre><code>&amp;lt;iframe src="http://api.recaptcha.net/noscript?k=&amp;lt;your_public_key&amp;gt;"
    height="300" width="500" frameborder="0"&amp;gt;&amp;lt;/iframe&amp;gt;&amp;lt;br&amp;gt;
&amp;lt;textarea name="recaptcha_challenge_field" rows="3" cols="40"&amp;gt;
&amp;lt;/textarea&amp;gt;
&amp;lt;input type="hidden" name="recaptcha_response_field" 
    value="manual_challenge"&amp;gt;
</code></pre>

<p>&lt;/noscript&gt;</pre></p>

<p>It probably goes without saying, but I&rsquo;ll say it anyway: you need to replace the two instances of &lt;your_public_key&gt; with the public key that you received during the account creation process. Be careful that you don&rsquo;t use your private key by mistake. If you do that then everybody will be able to see your private key and act like they&rsquo;re you.</p>

<p><h3>Step 3. Run your app and make sure the reCAPTCHA is showing up</h3></p>

<p>You should see it there in your form. It&rsquo;s OK if you are coming from <code>localhost</code> or <code>127.0.0.1</code> instead of the domain that you specified in the account creation step; reCAPTCHA will allow that. You should be able to click the buttons on the reCAPTCHA box and they should work.</p>

<p>After you goof around with that a bit, you&rsquo;ll need to update your app itself so that it actually uses the reCAPTCHA box to validate the form submission.</p>

<p>Let&rsquo;s turn now to the Java piece, where we validate the form and reCAPTCHA.</p>

<p><h3>Step 4: Validate the form, including the reCAPTCHA</h3></p>

<p>You&rsquo;ll find it convenient to <a href="http://code.google.com/p/recaptcha/downloads/list?q=label:java-Latest" target="_blank">download the recaptcha4j library</a>. It provides a simple API for submitting user responses to the reCAPTCHA server and finding out whether a user&rsquo;s response is valid.</p>

<p>At this point I&rsquo;m just going to lay some code on you. As mentioned above I&rsquo;m using <a href="spring-mvc-annotations.html">Spring 2.5 MVC with annotations</a> and Commons Validator, but the main thing is for you to look at how I&rsquo;m using the <code>ReCaptchaImpl</code> class and just copy that.</p>

<p><pre>import net.tanesha.recaptcha.ReCaptchaImpl;
import net.tanesha.recaptcha.ReCaptchaResponse;
import org.springframework.validation.BindingResult;
import org.springframework.validation.FieldError;
import org.springframework.validation.Validator;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;</p>

<p>&hellip;</p>

<p>@RequestMapping(value = &ldquo;/comments/postcomment.do&rdquo;, method = RequestMethod.POST)
public String doPost(</p>

<pre><code>    HttpServletRequest req,
    @RequestParam("articleId") long articleId,
    @RequestParam("recaptcha_challenge_field") String challenge,
    @RequestParam("recaptcha_response_field") String response,
    @ModelAttribute("comment") Comment comment,
    BindingResult result) {

// Validate the form (other than the reCAPTCHA)
validator.validate(comment, result);

// Validate the reCAPTCHA
String remoteAddr = req.getRemoteAddr();
ReCaptchaImpl reCaptcha = new ReCaptchaImpl();

// Probably don't want to hardcode your private key here but
// just to get it working is OK...
reCaptcha.setPrivateKey("&amp;lt;your_private_key&amp;gt;");

ReCaptchaResponse reCaptchaResponse =
    reCaptcha.checkAnswer(remoteAddr, challenge, response);

if (!reCaptchaResponse.isValid()) {
    FieldError fieldError = new FieldError(
        "comment",
        "captcha",
        response,
        false,
        new String[] { "errors.badCaptcha" },
        null,
        "Please try again.");
    result.addError(fieldError);
}

// If there are errors, then validation fails.
if (result.hasErrors()) {
    String path = comment.getPagePath();
    log.debug("Form validation error; forwarding to " + path);
    return "forward:" + path;
}

// Else validation succeeds.
log.debug("Form validation passed");
comment.setIpAddress(remoteAddr);
comment.setDate(new Date());

// Post the comment
log.debug("Posting the comment");
articleService.postComment(articleId, comment);
log.debug("Comment posted");

return "redirect:" + comment.getPagePath() + "#comments";
</code></pre>

<p>}</pre></p>

<p>Here&rsquo;s the <a href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/validation/FieldError.html" target="_blank">API for FieldError</a> since I know that&rsquo;s not clear from the code. Basically I&rsquo;m using that to indicate that a validation error occurred and set up an error message for the user. If you&rsquo;re not using Spring/Validator then you&rsquo;ll do something else here.</p>

<p>The <code>Comment</code> class is just a class from my app, so don&rsquo;t worry about that one.</p>

<p><h3>You did it</h3></p>

<p>Good job. If you&rsquo;re feeling ambitious, try to defeat reCAPTCHA with super-advanced OCR. If you succeed then it represents an advance in OCR technology. Tell somebody and become famous. :&ndash;)</p>

<p><div class="endnote">Post migrated from my Wheeler Software site.</div></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/03/10/make-web-services-transparent-with-spring-2-5-and-apache-cxf-2-0/">Make Web Services Transparent With Spring 2.5 and Apache CXF 2.0</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-03-10T13:43:21-07:00" pubdate data-updated="true">Mar 10<span>th</span>, 2008</time>
        
         | <a href="/2008/03/10/make-web-services-transparent-with-spring-2-5-and-apache-cxf-2-0/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In our <a href="http://springinpractice.com/2008/02/29/web-services-with-spring-2-5-and-apache-cxf-2-0/">previous installment</a>, we showed how to create Java-first web services in Spring 2.5 using Apache CXF 2.0.  This time we&rsquo;re going to show how to consume web services, once again using Spring 2.5 and Apache CXF 2.0.</p>

<p>Something great about the Spring/CXF duo is that your web service clients don&rsquo;t know that they&rsquo;re web service clients.  The approach is simple: as in any Spring app, you define Java interfaces for your services and inject the service implementations into the client classes that use them (such as MVC controllers).  CXF allows you to generate dynamic proxies according to the same Java service contract&mdash;the proxies are just another service implementation&mdash;and hence your client classes have no idea that they&rsquo;re calling web services.</p>

<p>This article shows you what you need to do to get it to work.  If you haven&rsquo;t already done so, please see the previous article, <a href="http://springinpractice.com/2008/02/29/web-services-with-spring-2-5-and-apache-cxf-2-0/">Web services with Spring 2.5 and Apache CXF 2.0</a>, to get your web services set up.  That article describes a user comment service that I build upon in the current article.</p>

<h3>Project setup</h3>


<p>First we need to set up the web service client project. Here are the various dependencies involved.</p>

<h4>Spring 2.5</h4>


<p>These all come from the Spring 2.5 distribution.  You can use whatever Spring 2.5 libraries you need for your own app.  Here I just happen to be using Spring MVC and JSTL, though neither of those is required for Spring/CXF integration.</p>

<ul class="square">
<li><code>jstl.jar</code> (in <code>lib/j2ee</code>)</li>
<li><code>spring.jar</code></li>
<li><code>spring-mvc.jar</code> (in <code>dist/modules</code>; the sample app uses Spring MVC)</li>
<li><code>standard.jar</code> (in <code>lib/jakarta-taglibs</code>; this is the JSTL reference implementation)</li>
</ul>




<h4>CXF and dependencies</h4>


<p>You can get these from the CXF 2.0.4 distribution.  Whether all of these are really necessary I don&rsquo;t know&mdash;for example I&rsquo;m not sure why we need the JavaMail library&mdash;but I&rsquo;m just going by what the CXF user manual says.</p>

<ul class="square">
<li><code>commons-logging-1.1.jar</code></li>
<li><code>cxf-2.0.4-incubator.jar</code> (this is the main CXF JAR)</li>
<li><code>geronimo-activation_1.1_spec-1.0-M1.jar</code> (or Sun&#8217;s Activation jar)</li>
<li><code>geronimo-annotation_1.0_spec-1.1.jar</code> (JSR 250)</li>
<li><code>geronimo-javamail_1.4_spec-1.0-M1.jar</code> (or Sun&#8217;s JavaMail jar)</li>
<li><code>geronimo-servlet_2.5_spec-1.1-M1.jar</code> (or Sun&#8217;s Servlet jar)</li>
<li><code>geronimo-stax-api_1.0_spec-1.0.jar</code></li>
<li><code>geronimo-ws-metadata_2.0_spec-1.1.1.jar (JSR 181)</code></li>
<li><code>jaxb-api-2.0.jar</code></li>
<li><code>jaxb-impl-2.0.5.jar</code></li>
<li><code>jaxws-api-2.0.jar</code></li>
<li><code>neethi-2.0.2.jar</code></li>
<li><code>saaj-api-1.3.jar</code></li>
<li><code>saaj-impl-1.3.jar</code></li>
<li><code>wsdl4j-1.6.1.jar</code></li>
<li><code>wstx-asl-3.2.1.jar</code></li>
<li><code>XmlSchema-1.3.2.jar</code></li>
<li><code>xml-resolver-1.2.jar</code></li>
</ul>




<h4>Aegis dependencies</h4>


<p>In addition to the above, you will need to add <code>jdom-1.0.jar</code> since Aegis databinding uses it.</p>

<h4>Client library dependencies</h4>


<p>In the previous article we created three classes in the <code>contactus</code> package: <code>ContactUsService</code>, <code>ContactUsServiceImpl</code>, and <code>Message</code>.  You will need to JAR <code>ContactUsService</code> (which is a service interface) and <code>Message</code> (which is a domain model class) and add the JAR as a dependency for the client application.  You do not need to include <code>ContactUsServiceImpl</code> since that&rsquo;s the backend for the web service; it&rsquo;s not part of the interface.  On the client side we will see that CXF will create a web service proxy according to the <code>ContactUsService</code> interface, and it will use <code>Message</code> for marshalling and unmarshalling.</p>

<p>With the dependencies in place, we&rsquo;ll now create a simple client that can view user messages using the web service we created the last time.  We&rsquo;re not going to treat the &ldquo;post user message&rdquo; operation in this article though it works in exactly the same way (which is why we&rsquo;re not going to treat it).</p>

<h3>Creating the client application</h3>


<p>This sample app is based on Spring MVC.  For that we&rsquo;ll need to create a couple of MVC controllers, a couple of JSPs, a <code>web.xml</code> file, and a Spring application context file.</p>

<h4>Spring MVC controller for viewing messages</h4>


<p>First we&rsquo;ll create a Spring MVC controller called <code>myapp.ViewMessagesController</code>.</p>

<pre>package myapp;

import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.RequestMapping;

import contactus.ContactUsService;

@Controller
public final class ViewMessagesController {
    private ContactUsService contactUsService;
    
    public void setContactUsService(ContactUsService contactUsService) {
        this.contactUsService = contactUsService;
    }
    
    @RequestMapping("/viewmessages.do")
    public ModelMap viewMessages() {
        return new ModelMap("messages", contactUsService.getMessages());
    }
}</pre>


<p>Since this is an article about Spring/CXF integration and not about Spring MVC, I won&rsquo;t go into the details of Spring MVC or annotation-based configuration.  If however you are interested in learning more, please see my article <a href="spring-mvc-annotations.html">Annotation-Based MVC in Spring 2.5</a>.</p>

<p>At any rate, the code is easy enough to understand.  We have a dependency injection method <code>setContactUsService</code>.  Any implementation of <code>ContactUsService</code> could go in there, including the one we wrote in the previous article, <code>contactus.ContactUsServiceImpl</code>.  In this case, though, we&rsquo;re going to use a CXF-generated dynamic proxy as shown below.</p>

<p>The <code>viewMessages</code> method simply grabs a list of messages from the <code>ContactUsService</code> and puts it in a model that the JSP will be able to see.</p>

<h4>JSP for viewing messages</h4>


<p>You will need to put this file at <code>/WEB-INF/jsp/viewmessages.jsp</code> in order for the request mapping to work as specified in <code>ViewMessagesController</code> above and <code>myapp-servlet.xml</code> below.  For those who are unfamiliar with Spring&rsquo;s annotation-based MVC configuration, the <code>@RequestMapping(&ldquo;/viewmessages.do&rdquo;)</code> annotation maps the given path to the <code>viewMessages</code> method, and the view resolver in <code>myapp-servlet.xml</code> tells Spring to look inside <code>/WEB-INF/jsp/</code> for the corresponding JSP.</p>

<pre>&lt;%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;View Messages&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;View Messages&lt;/h1&gt;
        &lt;ul&gt;
            &lt;c:forEach var="message" items="${messages}"&gt;
                &lt;li&gt;${message.lastNameFirstName} (${message.email}): ${message.text}&lt;/li&gt;
            &lt;/c:forEach&gt;
        &lt;/ul&gt;
    &lt;/body&gt;
&lt;/html&gt;</pre>


<p>This just displays a list of user messages.  I&rsquo;m using JSTL and JSTL EL.  The <code>${messages}</code> reference in the <code>forEach</code> tag refers to the list of messages that I placed in the <code>ModelMap</code> in <code>ViewMessagesController.viewMessages</code> above.  Spring takes care of making the contents of the <code>ModelMap</code> available to the JSP.</p>

<h4>web.xml</h4>




<pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="ws" version="2.5"&gt;
    
    &lt;servlet&gt;
        &lt;servlet-name&gt;myapp&lt;/servlet-name&gt;
        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;myapp&lt;/servlet-name&gt;
        &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
&lt;/web-app&gt;</pre>


<p>This just sets up the Spring MVC <code>DispatcherServlet</code> and tells the servlet container that the <code>*.do</code> extension mapping goes to the <code>DispatcherServlet</code>.</p>

<p>Now let&rsquo;s dig into the guts of it&mdash;the Spring application context.</p>

<h3>Creating the Spring application context</h3>


<p>This is where all the good stuff is: in the Spring application context.</p>

<h4>Spring application context: myapp-servlet.xml</h4>


<p>Put this file at <code>/WEB-INF/myapp-servlet.xml</code> so that it&rsquo;s where <code>DispatcherServlet</code> expects to find it. The <code>myapp-</code> part needs to match the value specified for <code>&lt;servlet-name&gt;</code> above.  (There&rsquo;s a way to change this but I&rsquo;m not worried about that for this sample app.)</p>

<pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;

    &lt;!-- Configure CXF to use Aegis data binding instead of JAXB --&gt;
    &lt;bean id="aegisBean"
          class="org.apache.cxf.aegis.databinding.AegisDatabinding"
          scope="prototype"/&gt;
    &lt;bean id="jaxwsAndAegisServiceFactory"
          class="org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean"
          scope="prototype"&gt; 
        &lt;property name="dataBinding" ref="aegisBean"/&gt;
        &lt;property name="serviceConfigurations"&gt;
          &lt;list&gt;
            &lt;bean class="org.apache.cxf.jaxws.support.JaxWsServiceConfiguration"/&gt;
            &lt;bean class="org.apache.cxf.aegis.databinding.AegisServiceConfiguration"/&gt;
            &lt;bean class="org.apache.cxf.service.factory.DefaultServiceConfiguration"/&gt; 
          &lt;/list&gt;
        &lt;/property&gt;
    &lt;/bean&gt;

    &lt;!-- Factory to create the dynamic proxy --&gt;
    &lt;bean id="contactUsFactory" class="org.apache.cxf.jaxws.JaxWsProxyFactoryBean"&gt;
        &lt;property name="serviceClass" value="contactus.ContactUsService"/&gt;
        &lt;property name="address"
                  value="http://localhost:8080/cxf-service-example/contactus"/&gt;
        &lt;property name="serviceFactory" ref="jaxwsAndAegisServiceFactory"/&gt;
    &lt;/bean&gt;
    
    &lt;!-- Web service dynamic proxy --&gt;
    &lt;bean id="contactUsService"
          class="contactus.ContactUsService"
          factory-bean="contactUsFactory"
          factory-method="create"/&gt;
    
    &lt;!-- Controllers --&gt;
    &lt;bean class="myapp.ViewMessagesController"&gt;
        &lt;property name="contactUsService" ref="contactUsService"/&gt;
    &lt;/bean&gt;
    
    &lt;!-- View resolvers --&gt;
    &lt;bean id="viewResolver"
          class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt;
        &lt;property name="prefix" value="/WEB-INF/jsp/"/&gt;
        &lt;property name="suffix" value=".jsp"/&gt;
    &lt;/bean&gt;
&lt;/beans&gt;</pre>


<p>There&rsquo;s lots to talk about here.  Let&rsquo;s do it bean-by-bean:</p>

<p><b>aegisBean:</b> CXF supports different databinding mechanisms (i.e., mechanisms for mapping back and forth between Java and XML). The default is JAXB but I was never able to get that to work for complex data types like <code>contactus.Message</code>.  So instead I used Aegis (which is bundled with CXF) and it works great.</p>

<p><b>jaxwsAndAegisServiceFactory:</b> This factory creates service models either based on a service&rsquo;s WSDL or else based on the structure of the service class.  These service models are in turn used by the service proxy factory, which creates your client-side web-service-aware dynamic proxies.  Anyway, you don&rsquo;t have to worry too much about <code>jaxwsAndAegisServiceFactory</code>; the only reason we&rsquo;re including it is that we need to be able to tell it to use Aegis databinding.</p>

<p><b>contactUsFactory:</b> This is a factory that generates the dynamic proxies we&rsquo;ve been talking about.  These proxies implement the <code>contactus.ContactUsService</code> interface, and this is what gives us the transparency referenced in the title of this article: the client application has no idea that it&rsquo;s working with web services at all (other than in the configuration).  If you wanted to, you could collapse the client app and the <code>contactus.ContactUsServiceImpl</code> backend and remove the web service altogether.  That&rsquo;s part of the beauty of Spring (and of Java interfaces and dynamic proxies).</p>

<p>We specify not only the service class but also the web service endpoint address and the service factory.  Again the only reason we have to deal with the service factory at all is that we&rsquo;re using the non-default Aegis databinding.  If you&rsquo;re able to get it working with JAXB then more power to you.  (And I&rsquo;d be interested in hearing about it!)</p>

<p><strong>IMPORTANT:</strong> You will need to set the host, port and context path in the <code>address</code> property to match your web service deployment address.  The one in the config file is the one I&rsquo;m using but you&rsquo;re probably using at least a different context path.</p>

<p>The other beans are just Spring MVC beans.  Nothing we need to worry about here.</p>

<p>We&rsquo;re now ready to try it out!</p>

<h3>Try it out</h3>


<p>Your application&rsquo;s view messages functionality should now work. Start up both your web service and your application.  Then point your browser to</p>

<p><code><a href="http://localhost:8080/cxf-client-example/viewMessages.do">http://localhost:8080/cxf-client-example/viewMessages.do</a></code></p>

<p><strong>(well, substitute in your host, port and context path!)</strong> and you should see the pair of hardcoded messages that we created in the last article:</p>

<div style="margin:20px 0"><img src="http://wheelersoftware.s3.amazonaws.com/articles/spring-cxf-consuming-web-services/browser.png" alt="Screenshot" /></div>


<p>If you got the screen above, then it&rsquo;s working!  Your application is pulling the messages from a web service, and transparently so.  If you decide you don&rsquo;t want to use web services, no problem: just pull the web service out and wire the service bean right into your MVC controller or other client class.</p>

<p>I hope you found this useful.  As always let me know if you have comments, questions or corrections.</p>

<h3>Resources</h3>




<ul class="square">
<li><a href="http://wheelersoftware.s3.amazonaws.com/articles/spring-cxf-consuming-web-services/cxf-service-example.zip">Service source code (JARs not included)</a></li>
<li><a href="http://wheelersoftware.s3.amazonaws.com/articles/spring-cxf-consuming-web-services/cxf-client-example.zip">Client source code (JARs not included)</a></li>
</ul>


<p><strong>Update (2008-09-03):</strong> Sam Brodkin was kind enough to create <a href="http://www.jroller.com/brodkin/entry/a_maven_project_for_willie">a Maven project</a> for this article. Thanks Sam!</p>

<div class="endnote">Post migrated from my Wheeler Software site.</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/02/29/web-services-with-spring-2-5-and-apache-cxf-2-0/">Web Services With Spring 2.5 and Apache CXF 2.0</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-02-29T12:19:27-08:00" pubdate data-updated="true">Feb 29<span>th</span>, 2008</time>
        
         | <a href="/2008/02/29/web-services-with-spring-2-5-and-apache-cxf-2-0/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In this tutorial I explain how to get a web service up and running using Spring 2.5 and Apache CXF 2.0, which is the <a href="http://xfire.codehaus.org/XFire+and+Celtix+Merge">combination of Celtix and XFire</a> and is considered XFire 2.0.  (I don&rsquo;t know what the Celtix team would say about that, but that&rsquo;s what the <a href="http://xfire.codehaus.org/">XFire site</a> says.)  Here I just treat the web service itself; to learn about consuming the web service using Spring and CXF, please see the article <a href="http://springinpractice.com/2008/03/10/make-web-services-transparent-with-spring-2-5-and-apache-cxf-2-0/">Make web services transparent with Spring 2.5 and Apache CXF 2.0</a>.</p>

<p>CXF supports both WSDL-first and Java-first web service development.  This article takes the Java-first approach.</p>

<h3>Project setup</h3>


<p>The first thing you&rsquo;ll need to do is <a href="http://incubator.apache.org/cxf/download.html">download CXF from the Apache CXF site</a>.  At the time of this writing the project is in incubator status and the latest version is 2.0.4.  That&rsquo;s the version I&rsquo;m using.</p>

<p>You&rsquo;ll also find it useful to know about the section of the CXF user documentation that deals with <a href="http://cwiki.apache.org/CXF20DOC/writing-a-service-with-spring.html">writing a service with Spring</a>, but currently the docs describe how to integrate with Spring 2.0, and since I want to integrate with Spring 2.5, there are some differences worth highlighting along the way.</p>

<p>Also, the docs describe a &ldquo;Hello, World&rdquo; web service that just returns a string, and in this tutorial we want to go a <i>little</i> further than that and actually do a class databinding.</p>

<p>Here are the service-side dependencies you&rsquo;ll need.  Inside the distribution there is a file called <code>WHICH_JARS</code> that describes in a little more detail what the JARs are for and which ones you&rsquo;ll really need, if you&rsquo;re interested in that.  But the following is essentially the list given in the user docs.</p>

<h4>CXF itself</h4>




<ul class="square">
    <li><code>cxf-2.0.4-incubator.jar</code></li>
</ul>




<h4>CXF dependencies</h4>


<p>Note that for CXF 2.0.4 the documented dependencies are almost but not quite the same as the JARs that are actually included in the distribution, once again, at the time of this writing (February 2008).  Specifically the <code>stax</code>, <code>neethi</code> and <code>XMLSchema</code> JARs are not the ones listed.  Here&rsquo;s the corrected list for CXF 2.0.4:</p>

<ul class="square">
<li><code>commons-logging-1.1.jar</code></li>
<li><code>geronimo-activation_1.1_spec-1.0-M1.jar</code> (or Sun&#8217;s Activation jar)</li>
<li><code>geronimo-annotation_1.0_spec-1.1.jar</code> (JSR 250)</li>
<li><code>geronimo-javamail_1.4_spec-1.0-M1.jar</code> (or Sun&#8217;s JavaMail jar)</li>
<li><code>geronimo-servlet_2.5_spec-1.1-M1.jar</code> (or Sun&#8217;s Servlet jar)</li>
<li><code>geronimo-stax-api_1.0_spec-1.0.jar</code></li>
<li><code>geronimo-ws-metadata_2.0_spec-1.1.1.jar (JSR 181)</code></li>
<li><code>jaxb-api-2.0.jar</code></li>
<li><code>jaxb-impl-2.0.5.jar</code></li>
<li><code>jaxws-api-2.0.jar</code></li>
<li><code>neethi-2.0.2.jar</code></li>
<li><code>saaj-api-1.3.jar</code></li>
<li><code>saaj-impl-1.3.jar</code></li>
<li><code>wsdl4j-1.6.1.jar</code></li>
<li><code>wstx-asl-3.2.1.jar</code></li>
<li><code>XmlSchema-1.3.2.jar</code></li>
<li><code>xml-resolver-1.2.jar</code></li>
</ul>




<h4>Aegis dependencies</h4>


<p>In addition to the above, you will need to add <code>jdom-1.0.jar</code> since Aegis databinding uses it.</p>

<h4>Spring dependencies</h4>


<p>In this case ignore what&rsquo;s in the CXF documentation, because we&rsquo;re integrating with Spring 2.5 instead of Spring 2.0.  I&rsquo;m going to assume that you have Spring 2.5 already set up on your web services project, including Hibernate or anything else that your web services will need on the implementation side.</p>

<p>Just in case you were wondering, you don&rsquo;t need the Spring MVC module&rsquo;s <code>DispatcherServlet</code> as CXF comes with its own servlet, <code>org.apache.cxf.transport.servlet.CXFServlet</code>.</p>

<p>OK, that should be good for basic project setup.  Let&rsquo;s write a simple service.</p>

<h3>Let&#8217;s write a simple web service</h3>


<p>Let&rsquo;s go basic but realistic and implement a &ldquo;contact us&rdquo; web service.  The idea is that lots of different applications and/or web sites need to have a web-based form to allow end users to contact an admin team (business, tech support, development, whatever) responsible for monitoring such communications.  We&rsquo;ll implement a web service so that multiple applications can share it easily.  There will be two operations:</p>

<ul class="square">
    <li><b>View the list of submitted messages:</b> This allows the admin team to see what the end users are saying.</li>
    <li><b>Post a message:</b> This allows end users to ask a question, tell us how great we are, demand their money back, etc.</li>
</ul>




<h4>Create the object model</h4>


<p>As we want to explore more than the barest &ldquo;Hello, World&rdquo; functionality, let&rsquo;s create a <code>Message</code> class that we can pass to the service and that we can get from the service.  This will allow us to play a bit with Java/XML databindings.</p>

<p>Here&rsquo;s the <code>Message</code> class:</p>

<pre>package contactus;

import org.apache.cxf.aegis.type.java5.IgnoreProperty;

public final class Message {
    private String firstName;
    private String lastName;
    private String email;
    private String text;
    
    public Message() { }
    
    public Message(String firstName, String lastName, String email, String text) {
        this.firstName = firstName;
        this.lastName = lastName;
        this.email = email;
        this.text = text;
    }

    public String getFirstName() { return firstName; }

    public void setFirstName(String firstName) { this.firstName = firstName; }

    public String getLastName() { return lastName; }

    public void setLastName(String lastName) { this.lastName = lastName; }
    
    @IgnoreProperty
    public String getLastNameFirstName() { return lastName + ", " + firstName; }
    
    public String getEmail() { return email; }

    public void setEmail(String email) { this.email = email; }

    public String getText() { return text; }

    public void setText(String text) { this.text = text; }
}</pre>


<p>In real life I might have a bunch of Hibernate annotations in there (I&rsquo;m a fan of annotation-based configuration), and I would create a DAO.  But as this is a tutorial, we&rsquo;ll keep it simple.</p>

<p>If you look carefully, however, you can see that I did in fact include an annotation. The <code>@IgnoreProperty</code> annotation is part of the Aegis databinding mechanism, which comes with CXF but is not the default.  (JAXB is the default.)  I ended up using Aegis instead of JAXB because JAXB was giving me trouble when I tried to return complex data types like <code>Message</code> from a web service.  Maybe it works and maybe it doesn&rsquo;t&mdash;I don&rsquo;t know&mdash;but when I plugged Aegis in it worked immediately and now I intend to use Aegis.  (More on JAXB/Aegis a little later.)  Anyway, <code>@IgnoreProperty</code> tells Aegis that I don&rsquo;t want <code>getLastNameFirstName()</code> to show up in the auto-generated WSDL.  It&rsquo;s just a read-only convenience method.</p>

<h4>Create the service interface</h4>


<p>Now we define a service interface.</p>

<pre>package contactus;

import java.util.List;

import javax.jws.WebParam;
import javax.jws.WebService;

@WebService
public interface ContactUsService {
    
    List&lt;Message&gt; getMessages();
    
    void postMessage(@WebParam(name = "message") Message message);
}</pre>


<p>The <code>@WebService</code> and <code>@WebParam</code> are <a href="http://java.sun.com/javaee/5/docs/api/javax/jws/package-summary.html">JAX-WS annotations</a>.  The first indicates that the interface defines a web service interface (we&rsquo;ll use it to autogenerate a WSDL) and the second allows us to use an HTTP parameter called &ldquo;message&rdquo; to reference the operation&rsquo;s argument instead of having to call it &ldquo;arg0&rdquo;, which is the default.</p>

<h4>Create the service implementation</h4>


<p>Here&rsquo;s our simple implementation of the <code>ContactUsService</code> interface.</p>

<pre>package contactus;

import java.util.ArrayList;
import java.util.List;

import javax.jws.WebService;

@WebService(endpointInterface = "contactus.ContactUsService")
public final class ContactUsServiceImpl implements ContactUsService {

    @Override
    public List&lt;Message&gt; getMessages() {
        List&lt;Message&gt; messages = new ArrayList&lt;Message&gt;();
        messages.add(new Message(
                "Willie", "Wheeler", "willie.wheeler@xyz.com", "Great job"));
        messages.add(new Message(
                "Dardy", "Chen", "dardy.chen@xyz.com", "I want my money back"));
        return messages;
    }

    @Override
    public void postMessage(Message message) {
        System.out.println(message);
    }
}</pre>


<p>Here the <code>@WebService</code> annotation is marking this class as a web service implementation, and also specifying that the WSDL should be generated using the <code>ContactUsService</code> interface.</p>

<p>With that, we have the Java backend for the web service. Let&rsquo;s move on to configuration.</p>

<h3>Configure your web service</h3>


<p>We need to create <code>web.xml</code> and a Spring application context file.</p>

<h4>web.xml configuration</h4>




<pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="services" version="2.5"&gt;
    
    &lt;context-param&gt;
        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
        &lt;param-value&gt;/WEB-INF/appContext.xml&lt;/param-value&gt;
    &lt;/context-param&gt;
    &lt;listener&gt;
        &lt;listener-class&gt;
            org.springframework.web.context.ContextLoaderListener
        &lt;/listener-class&gt;
    &lt;/listener&gt;
    &lt;servlet&gt;
        &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;
        &lt;servlet-class&gt;
            org.apache.cxf.transport.servlet.CXFServlet
        &lt;/servlet-class&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
&lt;/web-app&gt;</pre>


<p>Nothing surprising here.  The main thing worth mentioning is that we&rsquo;re using the <code>CXFServlet</code> to process all requests, which we&rsquo;re assuming are all requests for web services.</p>

<p>As you might guess from the <code>web.xml</code> file above, we need to create a Spring application context file called <code>appContext.xml</code>.</p>

<h4>appContext.xml configuration</h4>




<pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:cxf="http://cxf.apache.org/core"
    xmlns:jaxws="http://cxf.apache.org/jaxws"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd
        http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd
        http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd"
    default-autowire="byName"&gt;

    &lt;!-- Load CXF modules from cxf.jar --&gt;
    &lt;import resource="classpath:META-INF/cxf/cxf.xml" /&gt;
    &lt;import resource="classpath:META-INF/cxf/cxf-extension-soap.xml" /&gt;
    &lt;import resource="classpath:META-INF/cxf/cxf-servlet.xml" /&gt;
    
    &lt;!-- Enable message logging using the CXF logging feature --&gt;
    &lt;cxf:bus&gt;
        &lt;cxf:features&gt;
            &lt;cxf:logging/&gt;
        &lt;/cxf:features&gt;
    &lt;/cxf:bus&gt;
    
    &lt;!-- The service bean --&gt;
    &lt;bean id="contactUsServiceImpl" class="contactus.ContactUsServiceImpl"/&gt;

    &lt;!-- Aegis data binding --&gt;
    &lt;bean id="aegisBean"
        class="org.apache.cxf.aegis.databinding.AegisDatabinding"
        scope="prototype"/&gt; 
    &lt;bean id="jaxws-and-aegis-service-factory"
        class="org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean"
        scope="prototype"&gt;
        &lt;property name="dataBinding" ref="aegisBean"/&gt;
        &lt;property name="serviceConfigurations"&gt;
            &lt;list&gt;
              &lt;bean class="org.apache.cxf.jaxws.support.JaxWsServiceConfiguration"/&gt;
              &lt;bean class="org.apache.cxf.aegis.databinding.AegisServiceConfiguration"/&gt;
              &lt;bean class="org.apache.cxf.service.factory.DefaultServiceConfiguration"/&gt; 
            &lt;/list&gt;
        &lt;/property&gt;
    &lt;/bean&gt;
 
    &lt;!-- Service endpoint --&gt;
    &lt;!-- See http://incubator.apache.org/cxf/faq.html regarding CXF + Spring AOP --&gt;
    &lt;jaxws:endpoint id="contactUsService"
            implementorClass="contactus.ContactUsServiceImpl"
            implementor="#contactUsServiceImpl"
            address="/contactus"&gt;
        &lt;jaxws:serviceFactory&gt;
            &lt;ref bean="jaxws-and-aegis-service-factory"/&gt;
        &lt;/jaxws:serviceFactory&gt;
    &lt;/jaxws:endpoint&gt;
&lt;/beans&gt;</pre>


<p>Let&rsquo;s talk about <code>appContext.xml</code>.</p>

<p>The first three imports just import some bean definitions from the CXF JAR file.  I don&rsquo;t know the details and I don&rsquo;t think we&rsquo;re supposed to care about the details.</p>

<p>The bus config just puts logging in.  That&rsquo;s optional.  If you run this in a production environment you probably want to turn that off because it&rsquo;s verbose.</p>

<p>The service bean definition is just telling Spring about the service bean we wrote. We&rsquo;re going to put a web service endpoint in front of it.</p>

<p>The next piece on Aegis specifies the databinding mechanism we want to use for mapping back and forth between Java and XML.  I mentioned earlier that I tried using the default JAXB but was having problems getting it to work, so someone recommended to me to try Aegis and that worked like a charm.</p>

<p>Finally we define the web service endpoint.  The <code>#contactUsServiceImpl</code> piece connects the endpoint up to the service bean.  (Yes, the hash mark is required.) We use the JAX-WS/Aegis service factory that we defined earlier so we can use the Aegis databinding.</p>

<p>I&rsquo;m not using transactions or persistence in my simple service bean.  In a realistic service you are going to have transactions and persistence.  To make CXF play nicely with AOP (and hence Spring&rsquo;s declarative transactions) you are going to need to include the <code>implementorClass</code> attribute as I&rsquo;ve done.  For more details on that see the CXF FAQs at <a href="http://incubator.apache.org/cxf/faq.html"><a href="http://incubator.apache.org/cxf/faq.html">http://incubator.apache.org/cxf/faq.html</a></a>.</p>

<h4>A validation annoyance in Eclipse</h4>


<p>Though it in no way reflects a fault with Eclipse itself, if you are using Eclipse 3.3 you may be getting some annoying validation errors in the IDE, such as &ldquo;<code>cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element &lsquo;jaxws:endpoint&rsquo;.</code>&rdquo;  This is because the schema locations for the <code><a href="http://cxf.apache.org/core">http://cxf.apache.org/core</a></code> and <code><a href="http://cxf.apache.org/jaxws">http://cxf.apache.org/jaxws</a></code> keys don&rsquo;t actually point at real XSDs, so the validator won&rsquo;t recognize elements from the <code>cxf</code> and <code>jaxws</code> namespaces.  (That&rsquo;s why I say it isn&rsquo;t Eclipse&rsquo;s fault.)  This doesn&rsquo;t create a problem with the actual build, but the IDE will complain as it tries to validate the Spring app context files against the missing XSDs.  I haven&rsquo;t yet discovered the &ldquo;right&rdquo; solution to this problem (I&rsquo;d be delighted to have somebody tell me) but there are three workarounds I know about:</p>

<ul class="square">
    <li>You can map the <code>http://www.springframework.org/schema/beans</code> key to the <code>http://www.springframework.org/schema/beans/spring-beans.xsd</code> location (notice that I&#8217;ve removed the <code>-2.5</code> part).  That gets rid of the validation errors though now you&#8217;re using the Spring 2.0 beans schema.  That may be OK for you.</li>
    <li>You can turn off XML validation.  That seems pretty drastic but it&#8217;s an option (and in fact it&#8217;s what I&#8217;ve myself done).</li>
    <li>You can just ignore the errors.  Can&#8217;t&#8230; bring&#8230; myself&#8230; to&#8230; do&#8230; it&#8230; .</li>
</ul>


<p>There may be something you can do with Window &rarr; Preferences &rarr; Web and XML &rarr; XML Catalog but I didn&rsquo;t see it: even if you put the <code>core.xsd</code> and <code>jaxws.xsd</code> in the catalog, those XSDs in turn reference other schema locations that don&rsquo;t resolve to an XSD and it looks like a lot of work to me.</p>

<p>Anyway as I say if somebody knows the right way to handle this please let me know and I&rsquo;ll gladly update the article and credit you. :&ndash;)</p>

<h3>Let &#8216;er rip</h3>


<p>At this point you should have a working web service. Try it out. The URLs are:</p>

<ul class="square">
    <li><code>[path to CXFServlet]</code> - List of web services</li>
    <li><code>[path to CXFServlet]/contactus?wsdl</code> - WSDL for the Contact Us service</li>
    <li><code>[path to CXFServlet]/contactus/getMessages</code> - getMessages operation. Take a look at
    this and notice that, as promised, the individual messages don&#8217;t contain the
    <code>firstNameLastName</code> property, since we told Aegis to <code>@IgnoreProperty</code>.</li>
    <li><code>[path to CXFServlet]/contactus/postMessage?message=...</code> - postMessage operation</li>
</ul>


<p>So for example if you are running an out-of-the-box Tomcat instance then your URLs would be</p>

<ul class="square">
    <li><code>http://localhost:8080/mywebservices</code></li>
    <li><code>http://localhost:8080/mywebservices/contactus?wsdl</code></li>
    <li><code>http://localhost:8080/mywebservices/contactus/getMessages</code></li>
    <li><code>http://localhost:8080/mywebservices/contactus/postMessage?message=...</code></li>
</ul>


<p>replacing <code>mywebservices</code> with whatever you happened to use for your context root.</p>

<p>That&rsquo;s it!  If you want to learn how to consume web services using Spring 2.5 and CXF, please see my follow-up article <a href="http://springinpractice.com/2008/03/10/make-web-services-transparent-with-spring-2-5-and-apache-cxf-2-0/">Make web services transparent with Spring 2.5 and Apache CXF 2.0</a>.</p>

<p><strong>Update (2008-09-03):</strong> Sam Brodkin was kind enough to create <a href="http://www.jroller.com/brodkin/entry/a_maven_project_for_willie">a Maven project</a> for this article. Thanks Sam!</p>

<div class="endnote">Post migrated from my Wheeler Software site.</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/02/26/annotation-based-mvc-in-spring-2-5/">Annotation-based MVC in Spring 2.5</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-02-26T14:36:14-08:00" pubdate data-updated="true">Feb 26<span>th</span>, 2008</time>
        
         | <a href="/2008/02/26/annotation-based-mvc-in-spring-2-5/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Spring 2.5 introduces annotation-based configuration for MVC controllers. In this short article I&rsquo;ll describe at a high level what you need to do to migrate your Spring 2.0 app over to Spring 2.5, at least as far as MVC is concerned.  For information on migrating the other tiers, please see my article <a href="http://springinpractice.com/2008/02/26/annotation-based-autowiring-in-spring-2-5/">Annotation-based autowiring in Spring 2.5</a>.</p>

<p>First make sure you drop <code>spring-webmvc.jar</code> onto your classpath.  The <code>DispatcherServlet</code> is no longer part of <code>spring.jar</code>; it&rsquo;s in a separate module now.</p>

<p>Any given controller class can be set up in one of two ways. (And you can use both approaches in a single app.) Either the controller can handle a single action or else it can handle multiple actions. Usually a form &ldquo;action&rdquo;, which really includes initially serving up the form and then accepting submissions of that form, would be handled with the first sort of controller, and non-form actions can be combined into a single controller, with actions being represented by methods.</p>

<p>Here&rsquo;s an extremely basic multi-action controller that handles three separate actions (mapped to methods). The actions don&rsquo;t do anything at all other than serve up the requested page.</p>

<pre>package demo;
    
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
    
@Controller
public class SimpleController {
    
    @RequestMapping("/index.html")
    public void indexHandler() { }
    
    @RequestMapping("/about.html")
    public void aboutHandler() { }
    
    @RequestMapping("/admin.html")
    public void adminHandler() { }
}</pre>


<p>Even though this is just about the simplest possible controller, there are still a few important points to highlight, especially if you&rsquo;re coming from earlier versions of Spring. First you will note that the controller is a POJO. It does not extend <code>AbstractController</code> or any of the other controller classes that you would have extended with Spring 2.0 or earlier. Second, notice the annotations. I&rsquo;ve marked the controller itself with a <code>@Controller</code> annotation and the individual methods with <code>@RequestMapping</code> annotations. (I mentioned above that you can also map a controller to a single action; in that case you would attach the <code>@RequestMapping</code> annotation to the controller class itself. I&rsquo;m not doing that here though.) Note also that I&rsquo;m doing the URL mapping with the annotation. Pretty cool to have this option. Finally, though you can&rsquo;t tell from the controller, I&rsquo;m using the request URL to specify the logical view name. Unless you specify otherwise, the <code>DispatcherServlet</code> will automatically assume that <code>/index.html</code> maps to the logical name &ldquo;index&rdquo;, that <code>/admin.html</code> maps to the logical name &ldquo;admin&rdquo;, etc. (Internally, it creates an instance of <code>DefaultRequestToViewNameTranslator</code>, though you don&rsquo;t see this unless you want to.) This is an example of Spring&rsquo;s movement toward the convention-over-configuration philosophy.</p>

<p>Now you need to make sure your application context config file is set up. Here&rsquo;s what I have:</p>

<pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
 
&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;
    
    &lt;context:component-scan base-package="demo"/&gt;
    
    &lt;bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt;
        &lt;property name="prefix" value="/WEB-INF/jsp/"/&gt;
        &lt;property name="suffix" value=".jsp"/&gt;
    &lt;/bean&gt;
&lt;/beans&gt;</pre>


<p>The <code>&lt;component-scan&gt;</code> thing runs through your classes to find controllers and their annotation-based configuration. It knows which classes are controllers, as you may have guessed, because you used the <code>@Controller</code> annotation to label the controllers.  Spring also supports <code>@Repository</code> for DAO layers, <code>@Service</code> for service layers, and <code>@Component</code> as a general stereotype over <code>@Controller</code>, <code>@Repository</code> and <code>@Service</code>.) The view resolver is just like it was with Spring 2.0.</p>

<p>Those are the basics. Of course there&rsquo;s a lot more you&rsquo;re going to want to do; for example, you&rsquo;ll want to pass in request parameters, process requests, return model objects, etc.  But hopefully you&rsquo;ll find it useful to have a minimalistic example that gets you off the ground. Good luck!</p>

<div class="endnote">Post migrated from my Wheeler Software site.</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/02/26/annotation-based-autowiring-in-spring-2-5/">Annotation-based Autowiring in Spring 2.5</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-02-26T14:23:15-08:00" pubdate data-updated="true">Feb 26<span>th</span>, 2008</time>
        
         | <a href="/2008/02/26/annotation-based-autowiring-in-spring-2-5/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This article gives a quick summary of how to do autowiring with Spring 2.5 using annotations. We cover the data and services tiers here, but not the web tier. For information on web-tier configuration, please see my article <a href="http://springinpractice.com/2008/02/26/annotation-based-mvc-in-spring-2-5/">Annotation-based MVC in Spring 2.5</a>.</p>

<p>To set the proper context, our goal is to get rid of manual namings and wirings in the configuration files, and the basic strategy is convention-over-configuration: name the various dependencies according to the property names so that Spring can figure out how to autowire your app.</p>

<p><code>&lt;aside&gt;</code>Incidentally, it is a separate and interesting discussion as to whether autowiring is something that <em>should</em> be done in the first place.  One might argue that wiring is a configuration issue, and that adding annotations everywhere amounts to distributing the configuration across the various classes, thereby violating the principle of separation of concerns. Not to mention the fact that we don&rsquo;t normally want to have to rebuild the app to make a config change.  I can see that in some cases it makes sense to separate concerns (for example, I think modeling and persistence should generally be kept separate) and in other cases it doesn&rsquo;t (for example, code documentation should not be separated out).  Anyway I won&rsquo;t argue here whether autowiring is good; I&rsquo;ll just explain how to do it.<code>&lt;/aside&gt;</code></p>

<p>Here I assume that you&rsquo;re using Spring MVC and Hibernate.  I&rsquo;m also assuming that you already have separate beans configuration files for the web, service, and data access tiers, that they&rsquo;re currently not autowired (i.e. you want to migrate from a manual wiring to an autowired configuration).  Nothing essential hinges upon these assumptions&mdash;they just reflect my own configuration&mdash;and the instructions should be useful even if your configuration is somewhat different.</p>

<p>Here we go.</p>

<h3>Add annotations to name your DAO, service and controller classes</h3>


<p>Chances are good that your DAO and service classes don&rsquo;t have the names that name-based autowiring would require.  For example, you might define interfaces that have the &ldquo;right&rdquo; names, such as a <code>CategoryDao</code> interface, or a <code>ProductService</code> interface, and then your concrete implementation classes would be <code>HibernateCategoryDao</code> or <code>ProductServiceImpl</code> (or whatever), which won&rsquo;t autowire to the desired properties unless you have some strange and ill-advised property names.  So our first order of business is to provide the requisite names. With manual wiring, you provide this on the <code>&lt;bean&gt;</code> element using the <code>id</code> or <code>name</code> attributes.  But we&rsquo;re trying to eliminate said elements from our config, so that option is unavailable.  We use annotations instead.</p>

<h4>For each DAO, add a class-level @Repository annotation.</h4>


<p>These annotations go on the implementation class, not on the interface.</p>

<pre>import org.springframework.stereotype.Repository;
 
@Repository("productDao")
public final class ProductDaoImpl extends AbstractHibernateDao<Product>
  implements ProductDao {

    ...
}</pre>


<p>The <code>@Repository</code> annotation works in Spring 2.0 as well.</p>

<h4>For each service component, add a class-level @Service annotation.</h4>


<p>As before, these go on the implementation class, not on the interface.</p>

<pre>import org.springframework.stereotype.Service;
 
@Service("productService")
public final class ProductServiceImpl implements ProductService {
    ...
}</pre>


<p>Note that <code>@Service</code> is new with Spring 2.5.  So it won&rsquo;t work if you&rsquo;re using Spring 2.0 or earlier.</p>

<h4>For each Spring MVC controller, add a class-level @Controller annotation.</h4>


<p>Don&rsquo;t worry about providing a name; we won&rsquo;t need it.  (So this step is a little out of place in these instructions, but go ahead and do it anyway as you will need the <code>@Controller</code> annotation if you want to fully autowire the web tier.) Just do this for each controller:</p>

<pre>import org.springframework.stereotype.Controller;
 
@Controller
public final class ProductController {
    ...
}</pre>


<p>Like the <code>@Service</code> annotation, <code>@Controller</code> is new with Spring 2.5.</p>

<p>At this point we&rsquo;ve haven&rsquo;t really changed anything; you still have names defined in the manual configurations in addition to the annotation-based names you&rsquo;ve just added. Test out your app to make sure we haven&rsquo;t broken anything, and then move on to the next step.</p>

<h3>Tell Spring about your annotation-based names and autowiring strategy</h3>


<p>We have to tell Spring two things: where to find the names, and what strategy to use (viz., autowiring by name) for autowiring.</p>

<h4>Tell Spring where to find the annotation-based names</h4>


<p>You will need to use the <code>&lt;context:component-scan&gt;</code> element to do this. Since it&rsquo;s in the context namespace, you must declare that namespace and schema location in your Spring config files. Here are examples from the data access, service, and web configurations:</p>

<pre>&lt;!-- Spring configuration for data access tier --&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd"
    default-autowire="byName"&gt;
    
    &lt;context:component-scan base-package="x.y.dao"&gt;
        &lt;context:include-filter type="annotation"
            expression="org.springframework.stereotype.Repository"/&gt;
    &lt;/context:component-scan&gt;
    
    ...
&lt;/beans&gt;
    
&lt;!-- Spring configuration for service tier --&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd"
    default-autowire="byName"&gt;
    
    &lt;context:component-scan base-package="x.y.service"&gt;
        &lt;context:include-filter type="annotation"
            expression="org.springframework.stereotype.Service"/&gt;
    &lt;/context:component-scan&gt;

    ...
&lt;/beans&gt;
    
&lt;!-- Spring configuration for web tier --&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd"
    default-autowire="byName"&gt;
    
    &lt;context:component-scan base-package="x.y.web"&gt;
        &lt;context:include-filter type="annotation"
            expression="org.springframework.stereotype.Controller"/&gt;
    &lt;/context:component-scan&gt;

    ...
&lt;/beans&gt;</pre>


<p>(You&rsquo;ll of course need to provide the proper value for the base package.)</p>

<p>In the above, the pieces relevant to component names are the <code>xmlns:context</code> declaration, the <code>xsi:schemaLocation</code> declaration, and the <code>&lt;context:component-scan&gt;</code> configuration.  I&rsquo;m telling Spring to scan the <code>x.y.dao</code> package for components that have the <code>@Repository</code> annotation, to scan the <code>x.y.service</code> package for components that have the <code>@Service</code> annotation, and to scan <code>x.y.web</code> for components that have the <code>@Controller</code> annotation.  Spring will do that, and in the case of the data access and service components, it will use the value we provided to the annotations in step 1 above as a basis for name-based autowiring.  (We didn&rsquo;t provide any names with the <code>@Controller</code> annotation though I would assume you can do that.  It happens that in our case we won&rsquo;t need it.)</p>

<p>You&rsquo;ll notice however that I&rsquo;ve snuck in some <code>default-autowire=&ldquo;byName&rdquo;</code> attributes in there. As you can guess, that&rsquo;s for autowiring, and we&rsquo;ll look at that in just a second.</p>

<h4>Make sure you have public setters for each bean that you want autowired</h4>


<p>It appears that <code>default-autowire=&ldquo;byName&rdquo;</code> autowiring is based on public setters. (With the <code>@Autowired</code> attribute applied to fields you can avoid the setters, but if you have unit tests, you&rsquo;ll need setters to inject mocks, and so you may as well just keep the setters and make them public.  Weaker visibility doesn&rsquo;t appear to work.)</p>

<h4>Tell Spring that you want to use name-based autowiring</h4>


<p>The <code>default-autowire=&ldquo;byName&rdquo;</code> attribute tells Spring that you want to use component names to automatically wire up the app.  In step 1 above we went through the process of providing correct names (&ldquo;correct&rdquo; here means names that match the injection property names) for DAO and service classes.  That will allow us to remove the DAO and service components from our Spring config.  In all likelihood there will be other components that you can&rsquo;t remove from the config, such as a Hibernate <code>SessionFactory</code> in your data access configuration or a <code>TransactionManager</code> in your services configuration. In cases like that, just make sure that the names (or IDs) that you give to the components are the ones that would be expected when doing name-based injection.  Here are some examples:</p>

<pre>&lt;!-- Hibernate session factory --&gt;
&lt;bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"&gt;
    ...
&lt;/bean&gt;
 
&lt;!-- Hibernate transaction manager --&gt;
&lt;bean id="transactionManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager"&gt;
    &lt;property name="sessionFactory" ref="sessionFactory"/&gt;
&lt;/bean&gt;</pre>


<p>Note that using <code>default-autowire=&ldquo;byName&rdquo;</code> allows you to avoid having to use the <code>@Autowired</code> attribute on your various dependency injection fields or setters.  You shouldn&rsquo;t have to use that at all if you follow these instructions.</p>

<p>At this point you should be able to remove the following configurations:</p>

<ul>
<li>The DAO component definitions from your Spring data access configuration file (but don&#8217;t remove the <code>SessionFactory</code>).</li>
<li>The service component definitions from your Spring service configuration file (but don&#8217;t remove the <code>TransactionManager</code>).</li>
<li>The service injections from your MVC controllers in your web configuration file. Don&#8217;t remove the controllers themselves for now; you still need those for defining URL mappings.  Just remove the service injections since those will now be autowired. (Note that there&#8217;s a way to eliminate the MVC controller configurations as well; see <a href="http://springinpractice.com/2008/02/26/annotation-based-mvc-in-spring-2-5/">Annotation-based MVC in Spring 2.5</a> for details.)</li>
<li>The <code>sessionFactory</code> injection from your <code>TransactionManager</code> definition since that will be autowired, the <code>dataSource</code> injection from your <code>SessionFactory</code> (assuming you have an appropriate ID on the <code>DataSource</code> config), etc. In general just look through your configs for elements that will now be autowired and either comment them out or remove them.</li>
</ul>


<p>I would recommend commenting things out first and then testing the app to make sure it still works.</p>

<h3>Congratulations!</h3>


<p>Your app should now be autowired.</p>

<div class="endnote">Post migrated from my Wheeler Software site.</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/02/26/acegi-overview/">Acegi Overview (Now Spring Security)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-02-26T05:24:16-08:00" pubdate data-updated="true">Feb 26<span>th</span>, 2008</time>
        
         | <a href="/2008/02/26/acegi-overview/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class="intro"><span class="icon stickyNote">I wrote this back when Spring Security was called Acegi. Now it&#8217;s out of date, but I&#8217;m leaving it in the archive.</span></div>


<p>Acegi has been around for a while, but I just recently tried it out and am impressed with it so far. Upon first glance Acegi is slightly intimidating because there are lots of classes involved, and it may be hard to keep them straight. Fortunately Acegi is actually straightforward, despite appearances, to anybody who already understands servlet filters and the basics of Spring bean configuration.</p>

<p>The overarching idea is that Acegi provides a suite of security services (mostly if not entirely around authentication and authorization) based on <a href="http://java.sun.com/products/servlet/Filters.html">servlet filters</a>. So for example there are filters for accepting user logins, enforcing access controls, catching security-related exceptions,handling logouts, handling &ldquo;remember me&rdquo; functionality for logins, switching from HTTP to HTTPS, etc. So using Acegi mostly involves deciding which of the filters you want (e.g., maybe you want &ldquo;remember me&rdquo;, maybe you don&rsquo;t) and then configuring those into the app.</p>

<h3>Acegi involves dependency injection into servlet filters (say what?)</h3>


<p>Acegi does get a little interesting though because the various filters rely upon Spring&rsquo;s dependency injection, but the standard way of configuring servlet filters into <code>web.xml</code> does not support Spring dependency injection. (The <code>web.xml</code> schema doesn&rsquo;t have anything for dependency injection, nor should it.) Acegi uses a pretty neat trick to give us injectable servlet filters. What it does is it provides a <code>Filter</code> implementation called <code>FilterToBeanProxy</code> that you configure in like this:</p>

<pre>&lt;filter&gt;
    &lt;filter-name&gt;security&lt;/filter-name&gt;
    &lt;filter-class&gt;org.acegisecurity.util.FilterToBeanProxy&lt;/filter-class&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;targetClass&lt;/param-name&gt;
        &lt;param-value&gt;org.acegisecurity.util.FilterChainProxy&lt;/param-value&gt;
    &lt;/init-param&gt;
&lt;/filter&gt;
 
&lt;filter-mapping&gt;
    &lt;filter-name&gt;security&lt;/filter-name&gt;
    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;</pre>


<p>Pretty standard stuff. The idea behind <code>FilterToBeanProxy</code> is that it knows about your <code>[appname]-security.xml</code> bean configuration file, and so it can load in any beans that you define there. In <code>web.xml</code> we tell <code>FilterToBeanProxy</code> to load in a <code>FilterChainProxy</code> defined in <code>[appname]-security.xml</code>. <code>FilterChainProxy</code>,as its name suggests, is a <code>FilterChain</code> implementation. In turn, inside <code>[appname]-security.xml</code> we configure the various <code>Filter</code> beans mentioned above into the <code>FilterChainProxy</code>. Here&rsquo;s how it looks:</p>

<pre>&lt;bean id="filterChainProxy" class="org.acegisecurity.util.FilterChainProxy"&gt;
    &lt;property name="filterInvocationDefinitionSource"&gt;
        &lt;!-- IMPORTANT: DON'T LINEBREAK THE FILTER LIST, OR ELSE BEAN LOOKUP BREAKS! --&gt;
        &lt;!-- I'M JUST DOING IT HERE FOR DISPLAY PURPOSES --&gt;
        &lt;value&gt;
            CONVERT_URL_TO_LOWERCASE_BEFORE_COMPARISON
            PATTERN_TYPE_APACHE_ANT
            /**=httpSessionContextIntegrationFilter,logoutFilter,
authenticationProcessingFilter,exceptionTranslationFilter,filterSecurityInterceptor
        &lt;/value&gt;
    &lt/property&gt;
&lt;/bean&gt;</pre>


<p>The list of filter names is just a list of beans that you also configure in the same <code>[appname]-security.xml</code> config file. Here&rsquo;s an example:</p>

<pre>&lt;bean id="httpSessionContextIntegrationFilter"
    class="org.acegisecurity.context.HttpSessionContextIntegrationFilter"/&gt;</pre>


<p>Voil&agrave;, injectable servlet filters! Very cool.</p>

<h3>Be careful of the following gotchas</h3>


<p>There are some points/gotchas worth mentioning:</p>

<ol>
<li>The servlet filters must be added in a specific order. If you get the order wrong, it won&#8217;t work, since the servlet filters make assumptions about what kind of processing has already taken place. Check the <a href="http://www.acegisecurity.org/guide/springsecurity.html#filters">Acegi docs</a> for details.</li>
<li>If you&#8217;re using other servlet filters (such as Sitemesh), the Acegi filters need to come before the others.</li>
<li>When configuring FilterChainProxy, you will need to map URL patterns to the list of filters that you want to service requests matching those patterns. For example, you might map <code>/**</code> (Ant syntax) to a list of four filters. The list is comma-delimited. It is important that you not include line breaks after the commas. I&#8217;m guessing you can&#8217;t include whitespace at all, but for sure you can&#8217;t include line breaks. Otherwise you will get <code>Bean not found: ''</code> exceptions, without any explanation as to what the actual problem is. I&#8217;m surprised they don&#8217;t allow the line breaks since I figure many people will naturally want to break up a long list of filters with long names,but my surprise notwithstanding, the line breaks aren&#8217;t allowed.</li>
</ol>


<p>Here&rsquo;s a <a href="http://www.javaworld.com/javaworld/jw-10-2007/jw-10-acegi2.html">JavaWorld article on getting started with Acegi</a>. Also, <a href="http://www.amazon.com/Spring-Action-Craig-Walls/dp/1933988134/ref=pd_bbs_sr_1?ie=UTF8&s=books&qid=1199391787&sr=8-1">Spring in Action</a> has some good instructions.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/8/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2013/10/09/generating-json-error-object-responses-with-spring-web-mvc/">Generating JSON error object responses with Spring Web MVC</a>
      </li>
    
      <li class="post">
        <a href="/2013/10/07/handling-json-error-object-responses-with-springs-resttemplate/">Handling JSON error object responses with Spring&#8217;s RestTemplate</a>
      </li>
    
      <li class="post">
        <a href="/2013/10/02/quick-tip-basic-authentication-with-spring-resttemplate/">Quick tip: Basic authentication with Spring RestTemplate</a>
      </li>
    
      <li class="post">
        <a href="/2013/09/25/aggregating-tp90-data-with-splunk/">Aggregating TP90 data with Splunk</a>
      </li>
    
      <li class="post">
        <a href="/2013/09/14/optimistic-locking-with-spring-data-rest/">Optimistic locking with Spring Data REST</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/williewheeler">@williewheeler</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'williewheeler',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Willie Wheeler -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'springinpractice';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>






<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
